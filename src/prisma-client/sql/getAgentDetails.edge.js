"use strict"
const { makeTypedQueryFactory: $mkFactory } = require("../runtime/edge.js")
exports.getAgentDetails = /*#__PURE__*/ $mkFactory("SELECT\n\"Agent\".\"id\" AS \"agent_id\",\nname,\nlocation,\nstatus,\narch,\ncores,\nlogical_cpus,\nos,\nos_version,\nprocessor,\nram_gb,\nt.id AS target_id,\nskip_completed,\nmax_workers,\nmem_thresh,\nuse_history,\ndefault_timeout,\nscan_id,\nscan_root_path,\nscan_start_time,\nscan_end_time,\nmatches,\ntimeouts,\ngigs_per_second,\nscan_errors,\ncrawl_id,\ncrawl_root_path,\ncrawl_start_time,\ncrawl_end_time,\nuse_history,\nfile_count,\ndir_count,\ntotal_size,\nscan_size AS crawl_scan_size,\nlargest_file_size,\nlargest_file_path,\nthroughput,\ncrawl_errors\nFROM \"Agent\"\nJOIN \"Target\" t ON t.\"agentId\" = \"Agent\".id\nJOIN (\nSELECT\n\"Scan\".id            AS scan_id,\n\"Scan\".root_path     AS scan_root_path,\n\"Scan\".result_folder AS scan_folder,\n\"Scan\".start_time    AS scan_start_time,\n\"Scan\".end_time      AS scan_end_time,\n\"Scan\".matches,\n\"Scan\".timeouts,\n\"Scan\".gigs_per_second,\n\"Scan\".\"targetId\",\n(SELECT COUNT(*) FROM \"ScanError\" WHERE \"Scan\".\"id\" = \"ScanError\".\"scanId\")::INT AS scan_errors\nFROM \"Scan\"\nINNER JOIN (\nSELECT MAX(\"end_time\") AS \"end_time\" FROM \"Scan\" GROUP BY \"targetId\"\n) newest_scan\nON \"Scan\".end_time = newest_scan.end_time\n) s\nON s.\"targetId\" = t.id\nJOIN (\nSELECT\n\"Crawl\".id            AS crawl_id,\n\"Crawl\".root_path     AS crawl_root_path,\n\"Crawl\".result_folder AS crawl_folder,\n\"Crawl\".start_time    AS crawl_start_time,\n\"Crawl\".end_time      AS crawl_end_time,\n\"Crawl\".\"file_count\",\n\"Crawl\".\"dir_count\",\n\"Crawl\".\"total_size\",\n\"Crawl\".\"scan_size\",\n\"Crawl\".\"largest_file_size\",\n\"Crawl\".\"largest_file_path\",\n\"Crawl\".\"throughput\",\n\"Crawl\".\"targetId\",\n(SELECT COUNT(*) FROM \"CrawlError\" WHERE \"Crawl\".\"id\" = \"CrawlError\".\"crawlId\")::INT AS crawl_errors\nFROM \"Crawl\"\nINNER JOIN (\nSELECT MAX(\"end_time\") AS \"end_time\" FROM \"Crawl\" GROUP BY \"targetId\"\n) newest_crawl\nON \"Crawl\".end_time = newest_crawl.end_time\n) c\nON c.\"targetId\" = t.id\nWHERE \"Agent\".\"id\" = $1 OR $1 = ''")
